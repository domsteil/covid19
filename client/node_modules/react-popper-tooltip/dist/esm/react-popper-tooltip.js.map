{"version":3,"file":"react-popper-tooltip.js","sources":["../../src/utils.ts","../../src/Tooltip.tsx","../../src/TooltipTrigger.tsx"],"sourcesContent":["import React from 'react';\nimport { Ref } from './types';\n\nexport const TooltipContext = React.createContext({});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype Fn = ((...args: any[]) => void) | undefined;\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const callAll = (...fns: Fn[]) => (...args: any[]) =>\n  fns.forEach((fn) => fn && fn(...args));\n\nexport const noop = () => {\n  // do nothing\n};\n\nexport const canUseDOM = () =>\n  !!(\n    typeof window !== 'undefined' &&\n    window.document &&\n    window.document.createElement\n  );\n\nexport const setRef = (ref: Ref, node: HTMLElement | null) => {\n  if (typeof ref === 'function') {\n    return ref(node);\n  } else if (ref != null) {\n    ref.current = node;\n  }\n};\n","import React, { Component } from 'react';\nimport {\n  GetArrowPropsArg,\n  GetTooltipPropsArg,\n  TooltipProps,\n  TriggerTypes,\n} from './types';\nimport { callAll, TooltipContext, setRef } from './utils';\n\nclass Tooltip extends Component<TooltipProps> {\n  public static contextType = TooltipContext;\n\n  private observer?: MutationObserver;\n  private tooltipRef!: HTMLElement | null;\n\n  public componentDidMount() {\n    const observer = (this.observer = new MutationObserver(() => {\n      this.props.scheduleUpdate();\n    }));\n    observer.observe(this.tooltipRef!, this.props.mutationObserverOptions);\n\n    if (\n      this.isTriggeredBy('hover') ||\n      this.isTriggeredBy('click') ||\n      this.isTriggeredBy('right-click')\n    ) {\n      const {\n        removeParentOutsideClickHandler,\n        removeParentOutsideRightClickHandler,\n      } = this.context;\n      this.addOutsideClickHandler();\n      this.addOutsideRightClickHandler();\n      if (removeParentOutsideClickHandler) {\n        removeParentOutsideClickHandler();\n      }\n      if (removeParentOutsideRightClickHandler) {\n        removeParentOutsideRightClickHandler();\n      }\n    }\n  }\n\n  public componentDidUpdate() {\n    if (this.props.closeOnOutOfBoundaries && this.props.outOfBoundaries) {\n      this.props.hideTooltip();\n    }\n  }\n\n  public componentWillUnmount() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n\n    if (\n      this.isTriggeredBy('hover') ||\n      this.isTriggeredBy('click') ||\n      this.isTriggeredBy('right-click')\n    ) {\n      const {\n        isParentNoneTriggered,\n        addParentOutsideClickHandler,\n        addParentOutsideRightClickHandler,\n      } = this.context;\n      this.removeOutsideClickHandler();\n      this.removeOutsideRightClickHandler();\n      this.handleOutsideClick = undefined;\n      this.handleOutsideRightClick = undefined;\n      if (!isParentNoneTriggered && addParentOutsideClickHandler) {\n        addParentOutsideClickHandler();\n      }\n      if (!isParentNoneTriggered && addParentOutsideRightClickHandler) {\n        addParentOutsideRightClickHandler();\n      }\n    }\n  }\n\n  public render() {\n    const { arrowProps, placement, tooltip } = this.props;\n\n    return (\n      <TooltipContext.Provider value={this.contextValue}>\n        {tooltip({\n          arrowRef: arrowProps.ref,\n          getArrowProps: this.getArrowProps,\n          getTooltipProps: this.getTooltipProps,\n          placement,\n          tooltipRef: this.getTooltipRef,\n        })}\n      </TooltipContext.Provider>\n    );\n  }\n\n  private isTriggeredBy(event: TriggerTypes) {\n    const { trigger } = this.props;\n    return (\n      trigger === event || (Array.isArray(trigger) && trigger.includes(event))\n    );\n  }\n\n  private handleOutsideClick?: EventListener = (event) => {\n    if (this.tooltipRef && !this.tooltipRef.contains(event.target as Node)) {\n      const { parentOutsideClickHandler } = this.context;\n      const { hideTooltip, clearScheduled } = this.props;\n\n      clearScheduled();\n      hideTooltip();\n      if (parentOutsideClickHandler) {\n        parentOutsideClickHandler(event);\n      }\n    }\n  };\n\n  private handleOutsideRightClick?: EventListener = (event) => {\n    if (this.tooltipRef && !this.tooltipRef.contains(event.target as Node)) {\n      const { parentOutsideRightClickHandler } = this.context;\n      const { hideTooltip, clearScheduled } = this.props;\n\n      clearScheduled();\n      hideTooltip();\n      if (parentOutsideRightClickHandler) {\n        parentOutsideRightClickHandler(event);\n      }\n    }\n  };\n\n  private addOutsideClickHandler = () => {\n    document.body.addEventListener('touchend', this.handleOutsideClick!);\n    document.body.addEventListener('click', this.handleOutsideClick!);\n  };\n\n  private removeOutsideClickHandler = () => {\n    document.body.removeEventListener('touchend', this.handleOutsideClick!);\n    document.body.removeEventListener('click', this.handleOutsideClick!);\n  };\n\n  private addOutsideRightClickHandler = () =>\n    document.body.addEventListener(\n      'contextmenu',\n      this.handleOutsideRightClick!\n    );\n\n  private removeOutsideRightClickHandler = () =>\n    document.body.removeEventListener(\n      'contextmenu',\n      this.handleOutsideRightClick!\n    );\n\n  private getTooltipRef = (node: HTMLElement | null) => {\n    this.tooltipRef = node;\n    setRef(this.props.innerRef, node);\n  };\n\n  private getArrowProps = (props: GetArrowPropsArg = {}) => ({\n    ...props,\n    style: { ...props.style, ...this.props.arrowProps.style },\n  });\n\n  private getTooltipProps = (props: GetTooltipPropsArg = {}) => ({\n    ...props,\n    ...(this.isTriggeredBy('hover') && {\n      onMouseEnter: callAll(this.props.clearScheduled, props.onMouseEnter),\n      onMouseLeave: callAll(this.props.hideTooltip, props.onMouseLeave),\n    }),\n    style: { ...props.style, ...this.props.style },\n  });\n\n  private contextValue = {\n    isParentNoneTriggered: this.props.trigger === 'none',\n    addParentOutsideClickHandler: this.addOutsideClickHandler,\n    addParentOutsideRightClickHandler: this.addOutsideRightClickHandler,\n    parentOutsideClickHandler: this.handleOutsideClick,\n    parentOutsideRightClickHandler: this.handleOutsideRightClick,\n    removeParentOutsideClickHandler: this.removeOutsideClickHandler,\n    removeParentOutsideRightClickHandler: this.removeOutsideRightClickHandler,\n  };\n}\n\nexport default Tooltip;\n","/**\n * @author Mohsin Ul Haq <mohsinulhaq01@gmail.com>\n */\nimport PopperJS from 'popper.js';\nimport React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Manager, Popper, Reference } from 'react-popper';\nimport Tooltip from './Tooltip';\nimport {\n  GetTriggerPropsArg,\n  TooltipTriggerProps,\n  TooltipTriggerState,\n  TriggerTypes,\n} from './types';\nimport { callAll, canUseDOM, noop } from './utils';\n\nconst DEFAULT_MODIFIERS: PopperJS.Modifiers = {\n  preventOverflow: {\n    boundariesElement: 'viewport',\n  },\n};\n\nconst DEFAULT_MUTATION_OBSERVER_CONFIG: MutationObserverInit = {\n  childList: true,\n  subtree: true,\n};\n\nclass TooltipTrigger extends Component<\n  TooltipTriggerProps,\n  TooltipTriggerState\n> {\n  public static defaultProps = {\n    closeOnOutOfBoundaries: true,\n    defaultTooltipShown: false,\n    delayHide: 0,\n    delayShow: 0,\n    followCursor: false,\n    onVisibilityChange: noop,\n    placement: 'right',\n    portalContainer: canUseDOM() ? document.body : null,\n    trigger: 'hover',\n    usePortal: canUseDOM(),\n    mutationObserverOptions: DEFAULT_MUTATION_OBSERVER_CONFIG,\n  };\n\n  public state: TooltipTriggerState = {\n    tooltipShown: this.props.defaultTooltipShown,\n  };\n\n  private hideTimeout?: number;\n  private showTimeout?: number;\n  private popperOffset?: PopperJS.Offset;\n\n  public componentWillUnmount() {\n    this.clearScheduled();\n  }\n\n  public render() {\n    const {\n      children,\n      tooltip,\n      placement,\n      trigger,\n      getTriggerRef,\n      modifiers,\n      closeOnOutOfBoundaries,\n      usePortal,\n      portalContainer,\n      followCursor,\n      getTooltipRef,\n      mutationObserverOptions,\n      ...restProps\n    } = this.props;\n\n    const popper = (\n      <Popper\n        innerRef={getTooltipRef}\n        placement={placement}\n        modifiers={{\n          ...DEFAULT_MODIFIERS,\n          ...(followCursor && {\n            followCursorModifier: {\n              enabled: true,\n              fn: (data) => {\n                this.popperOffset = data.offsets.popper;\n                return data;\n              },\n              order: 1000,\n            },\n          }),\n          ...modifiers,\n        }}\n        {...restProps}\n      >\n        {({\n          ref,\n          style,\n          // tslint:disable-next-line\n          placement,\n          arrowProps,\n          outOfBoundaries,\n          scheduleUpdate,\n        }) => {\n          if (followCursor && this.popperOffset) {\n            const { pageX, pageY } = this.state;\n            const { width, height } = this.popperOffset;\n            const x =\n              pageX! + width > window.scrollX + document.body.offsetWidth\n                ? pageX! - width\n                : pageX;\n            const y =\n              pageY! + height > window.scrollY + document.body.offsetHeight\n                ? pageY! - height\n                : pageY;\n            style.transform = `translate3d(${x}px, ${y}px, 0`;\n          }\n\n          return (\n            <Tooltip\n              {...{\n                arrowProps,\n                closeOnOutOfBoundaries,\n                outOfBoundaries,\n                placement,\n                scheduleUpdate,\n                style,\n                tooltip,\n                trigger,\n                mutationObserverOptions,\n              }}\n              clearScheduled={this.clearScheduled}\n              hideTooltip={this.hideTooltip}\n              innerRef={ref}\n            />\n          );\n        }}\n      </Popper>\n    );\n\n    return (\n      <Manager>\n        <Reference innerRef={getTriggerRef}>\n          {({ ref }) =>\n            children({ getTriggerProps: this.getTriggerProps, triggerRef: ref })\n          }\n        </Reference>\n        {this.getState() &&\n          (usePortal ? createPortal(popper, portalContainer) : popper)}\n      </Manager>\n    );\n  }\n\n  private isControlled() {\n    return this.props.tooltipShown !== undefined;\n  }\n\n  private getState() {\n    return this.isControlled()\n      ? this.props.tooltipShown\n      : this.state.tooltipShown;\n  }\n\n  private setTooltipState = (state: TooltipTriggerState) => {\n    const cb = () => this.props.onVisibilityChange(state.tooltipShown);\n    this.isControlled() ? cb() : this.setState(state, cb);\n  };\n\n  private clearScheduled = () => {\n    clearTimeout(this.hideTimeout);\n    clearTimeout(this.showTimeout);\n  };\n\n  private showTooltip = ({\n    pageX,\n    pageY,\n  }: {\n    pageX: number;\n    pageY: number;\n  }) => {\n    this.clearScheduled();\n    let state: TooltipTriggerState = {\n      tooltipShown: true,\n    };\n    if (this.props.followCursor) {\n      state = {\n        ...state,\n        pageX,\n        pageY,\n      };\n    }\n    this.showTimeout = window.setTimeout(\n      () => this.setTooltipState(state),\n      this.props.delayShow\n    );\n  };\n\n  private hideTooltip = () => {\n    this.clearScheduled();\n    this.hideTimeout = window.setTimeout(\n      () => this.setTooltipState({ tooltipShown: false }),\n      this.props.delayHide\n    );\n  };\n\n  private toggleTooltip = ({\n    pageX,\n    pageY,\n  }: {\n    pageX: number;\n    pageY: number;\n  }) => {\n    const action = this.getState() ? 'hideTooltip' : 'showTooltip';\n    this[action]({ pageX, pageY });\n  };\n\n  private clickToggle: React.MouseEventHandler = (event: React.MouseEvent) => {\n    event.preventDefault();\n    const { pageX, pageY } = event;\n    const action = this.props.followCursor ? 'showTooltip' : 'toggleTooltip';\n    this[action]({ pageX, pageY });\n  };\n\n  private contextMenuToggle: React.MouseEventHandler = (event) => {\n    event.preventDefault();\n    const { pageX, pageY } = event;\n    const action = this.props.followCursor ? 'showTooltip' : 'toggleTooltip';\n    this[action]({ pageX, pageY });\n  };\n\n  private isTriggeredBy(event: TriggerTypes) {\n    const { trigger } = this.props;\n    return (\n      trigger === event || (Array.isArray(trigger) && trigger.includes(event))\n    );\n  }\n\n  private getTriggerProps = (props: GetTriggerPropsArg = {}) => {\n    return {\n      ...props,\n      ...(this.isTriggeredBy('click') && {\n        onClick: callAll(this.clickToggle, props.onClick),\n        onTouchEnd: callAll(this.clickToggle, props.onTouchEnd),\n      }),\n      ...(this.isTriggeredBy('right-click') && {\n        onContextMenu: callAll(this.contextMenuToggle, props.onContextMenu),\n      }),\n      ...(this.isTriggeredBy('hover') && {\n        onMouseEnter: callAll(this.showTooltip, props.onMouseEnter),\n        onMouseLeave: callAll(this.hideTooltip, props.onMouseLeave),\n        ...(this.props.followCursor && {\n          onMouseMove: callAll(this.showTooltip, props.onMouseMove),\n        }),\n      }),\n      ...(this.isTriggeredBy('focus') && {\n        onFocus: callAll(this.showTooltip, props.onFocus),\n        onBlur: callAll(this.hideTooltip, props.onBlur),\n      }),\n    };\n  };\n}\n\nexport default TooltipTrigger;\n"],"names":["TooltipContext","React","createContext","callAll","fns","args","forEach","fn","noop","canUseDOM","window","document","createElement","setRef","ref","node","current","Tooltip","Component","observer","tooltipRef","handleOutsideClick","event","contains","target","parentOutsideClickHandler","context","props","hideTooltip","clearScheduled","handleOutsideRightClick","parentOutsideRightClickHandler","addOutsideClickHandler","body","addEventListener","removeOutsideClickHandler","removeEventListener","addOutsideRightClickHandler","removeOutsideRightClickHandler","getTooltipRef","innerRef","getArrowProps","style","arrowProps","getTooltipProps","isTriggeredBy","onMouseEnter","onMouseLeave","contextValue","isParentNoneTriggered","trigger","addParentOutsideClickHandler","addParentOutsideRightClickHandler","removeParentOutsideClickHandler","removeParentOutsideRightClickHandler","componentDidMount","MutationObserver","scheduleUpdate","observe","mutationObserverOptions","componentDidUpdate","closeOnOutOfBoundaries","outOfBoundaries","componentWillUnmount","disconnect","undefined","render","placement","tooltip","arrowRef","Array","isArray","includes","contextType","DEFAULT_MODIFIERS","preventOverflow","boundariesElement","DEFAULT_MUTATION_OBSERVER_CONFIG","childList","subtree","TooltipTrigger","state","tooltipShown","defaultTooltipShown","hideTimeout","showTimeout","popperOffset","setTooltipState","cb","onVisibilityChange","isControlled","setState","clearTimeout","showTooltip","pageX","pageY","followCursor","setTimeout","delayShow","delayHide","toggleTooltip","action","getState","clickToggle","preventDefault","contextMenuToggle","getTriggerProps","onClick","onTouchEnd","onContextMenu","onMouseMove","onFocus","onBlur","children","getTriggerRef","modifiers","usePortal","portalContainer","restProps","popper","followCursorModifier","enabled","data","offsets","order","width","height","x","scrollX","offsetWidth","y","scrollY","offsetHeight","transform","triggerRef","createPortal","defaultProps"],"mappings":"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"}