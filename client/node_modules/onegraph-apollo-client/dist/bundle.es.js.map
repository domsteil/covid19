{"version":3,"file":"bundle.es.js","sources":["../src/OneGraphApolloClient.js"],"sourcesContent":["//@flow\n\nimport ApolloClient from 'apollo-boost';\n\nimport type {OneGraphAuth} from 'onegraph-auth';\n\nexport type OneGraphApolloClientConfig = {\n  oneGraphAuth: OneGraphAuth,\n};\n\nfunction validateConfig(config) {\n  if (!config.oneGraphAuth) {\n    throw new Error(\n      'createApolloClient was called with invalid config: missing oneGraphAuth',\n    );\n  }\n}\n\nclass OneGraphApolloClient extends ApolloClient {\n  constructor(config: OneGraphApolloClientConfig) {\n    validateConfig(config);\n    const {oneGraphAuth} = config;\n    const uri = new URL(oneGraphAuth.oneGraphOrigin);\n    uri.pathname = '/dynamic';\n    uri.searchParams.append('app_id', oneGraphAuth.appId);\n\n    super({\n      uri: uri.toString(),\n      request: operation =>\n        operation.setContext({headers: oneGraphAuth.authHeaders()}),\n      ...config,\n    });\n  }\n}\n\nexport default OneGraphApolloClient;\n"],"names":["validateConfig","config","oneGraphAuth","Error","OneGraphApolloClient","uri","URL","oneGraphOrigin","pathname","searchParams","append","appId","toString","operation","setContext","headers","authHeaders","ApolloClient"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,SAASA,cAAT,CAAwBC,MAAxB,EAAgC;MAC1B,CAACA,OAAOC,YAAZ,EAA0B;UAClB,IAAIC,KAAJ,CACJ,yEADI,CAAN;;;;IAMEC;;;gCACQH,MAAZ,EAAgD;;;mBAC/BA,MAAf;QACOC,YAFuC,GAEvBD,MAFuB,CAEvCC,YAFuC;;QAGxCG,MAAM,IAAIC,GAAJ,CAAQJ,aAAaK,cAArB,CAAZ;QACIC,QAAJ,GAAe,UAAf;QACIC,YAAJ,CAAiBC,MAAjB,CAAwB,QAAxB,EAAkCR,aAAaS,KAA/C;;;WAGON,IAAIO,QAAJ,EARuC;eASnC;eACPC,UAAUC,UAAV,CAAqB,EAACC,SAASb,aAAac,WAAb,EAAV,EAArB,CADO;;OAENf,MAXyC;;;;EADfgB;;;;;"}