{"ast":null,"code":"var _jsxFileName = \"C:\\\\covid19\\\\client\\\\src\\\\components\\\\messages\\\\TripleChat.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport useFetch from \"../../components/useFetch\";\nimport axios from 'axios';\nimport querystring from 'querystring';\nimport Button from 'evergreen-ui/commonjs/buttons/src/Button';\nimport TypingIndicator from './TypingIndicator';\nimport { distanceInWordsToNow, isToday } from 'date-fns';\nimport { useContext } from 'react';\nimport UserContext from '../../components/UserContext';\nimport TextInput from 'evergreen-ui/commonjs/text-input/src/TextInput';\nimport Container from '../../components/container';\nimport Component from '@reach/component-component';\nimport CornerDialog from 'evergreen-ui/commonjs/corner-dialog/src/CornerDialog';\nimport Menu from 'evergreen-ui/commonjs/menu/src/Menu';\nimport Text from 'evergreen-ui/commonjs/typography/src/Text';\nimport Heading from 'evergreen-ui/commonjs/typography/src/Heading';\nexport default class TripleChat extends React.Component {\n  constructor(props) {\n    super();\n\n    _defineProperty(this, \"handleHashChange\", event => {\n      this.setState({\n        hash: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"handlePasswordChange\", event => {\n      this.setState({\n        pass: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"handleTyping\", (body, mutate) => {\n      const textLength = body.length;\n\n      if (textLength !== 0 && textLength % 5 === 0 || textLength === 1) {\n        this.emitTypingEvent(mutate);\n      }\n\n      this.setState({\n        body\n      });\n    });\n\n    _defineProperty(this, \"handleResponse\", (status, msg) => {\n      if (status === 200) {\n        setStatus({\n          submitted: true,\n          submitting: false,\n          info: {\n            error: false,\n            msg: msg\n          }\n        });\n        setInputs({\n          email: '',\n          message: ''\n        });\n      } else {\n        setStatus({\n          info: {\n            error: true,\n            msg: msg\n          }\n        });\n      }\n    });\n\n    _defineProperty(this, \"emitTypingEvent\", async mutate => {\n      if (this.context.user) {\n        await mutate({\n          mutation: emitTypingEvent,\n          variables: {\n            username: this.context.user\n          }\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleSubmit\", event => {\n      const hash = this.state.hash;\n      const pass = this.state.pass;\n      let axiosConfig = {\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"POST,GET,OPTIONS, PUT, DELETE\"\n        }\n      };\n      axios.post(`https://app.triplecheck.network/decrypt`, querystring.stringify({\n        hash: hash,\n        pass: pass\n      }), axiosConfig).then(res => {\n        const decryptedData = res.data;\n        this.setState({\n          decryptedData\n        });\n        console.log(res.data);\n      });\n    });\n\n    this.state = {\n      status: '',\n      hash: '',\n      pass: '',\n      file: null,\n      policy: '',\n      message: '',\n      decryptedData: []\n    };\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.handlePolicyChange = this.handlePolicyChange.bind(this);\n    this.fileUpload = this.fileUpload.bind(this);\n  }\n\n  // Form Submit\n  onFormSubmit(e) {\n    e.preventDefault(); // Stop form submit\n\n    this.fileUpload(this.state.file).then(response => {\n      this.setState({\n        message: 'Success.'\n      });\n      console.log(response.data);\n    });\n  }\n\n  onChange(e) {\n    this.setState({\n      file: e.target.files[0]\n    });\n  }\n\n  handlePolicyChange(e) {\n    this.setState({\n      policy: e.target.value\n    });\n  } // Emit Typing\n\n\n  getFiles() {\n    const items = useFetch(\"https://app.triplecheck.network/listEncryptedFiles\");\n  } // File Upload\n\n\n  fileUpload(file) {\n    const policy = this.state.policy;\n    const url = \"https://app.triplecheck.network/upload\";\n    const formData = new FormData();\n    formData.append('policy', policy);\n    formData.append('file', file);\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data',\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"POST,GET,OPTIONS, PUT, DELETE\"\n      }\n    };\n    return post(url, formData, config);\n  } // Handle Submit\n\n\n  render() {\n    return __jsx(\"main\", {\n      className: \"jsx-3402671600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }\n    }, __jsx(Component, {\n      initialState: {\n        isShown: false\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    }, ({\n      state,\n      setState\n    }) => __jsx(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 5\n      }\n    }, __jsx(CornerDialog, {\n      isShown: state.isShown,\n      confirmLabel: \"Submit\",\n      onCancel: () => setState({\n        isShown: false\n      }),\n      onCloseComplete: this.handleSubmit,\n      hasFooter: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }\n    }, __jsx(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"jsx-3402671600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }\n    }, __jsx(\"input\", {\n      type: \"file\",\n      onChange: this.onChange,\n      className: \"jsx-3402671600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }), __jsx(\"select\", {\n      value: this.state.policy,\n      onChange: this.handlePolicyChange,\n      className: \"jsx-3402671600\" + \" \" + \"policyDropdown\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, __jsx(\"option\", {\n      value: \"policy1\",\n      className: \"jsx-3402671600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, \"Policy 1\"), __jsx(\"option\", {\n      value: \"policy2\",\n      className: \"jsx-3402671600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }, \"Policy 2\")), __jsx(Button, {\n      type: \"submit\",\n      marginBottom: 8,\n      marginLeft: 8,\n      iconBefore: \"cloud-upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }\n    }, \"Upload\"), __jsx(\"h4\", {\n      className: \"jsx-3402671600\" + \" \" + \"successMessage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 103\n      }\n    }, this.state.message), __jsx(\"label\", {\n      className: \"jsx-3402671600\" + \" \" + \"tripleCheck\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, __jsx(\"input\", {\n      placeholder: \"Message Hash\",\n      type: \"text\",\n      name: \"hash\",\n      onChange: this.handleHashChange,\n      className: \"jsx-3402671600\" + \" \" + \"message-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }\n    })), __jsx(\"br\", {\n      className: \"jsx-3402671600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }), __jsx(\"br\", {\n      className: \"jsx-3402671600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }), __jsx(\"label\", {\n      className: \"jsx-3402671600\" + \" \" + \"tripleCheck\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }, __jsx(\"input\", {\n      placeholder: \"Password\",\n      type: \"password\",\n      name: \"pass\",\n      onChange: this.handlePasswordChange,\n      className: \"jsx-3402671600\" + \" \" + \"message-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    })), __jsx(\"br\", {\n      className: \"jsx-3402671600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    }), __jsx(\"br\", {\n      className: \"jsx-3402671600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }), __jsx(Button, {\n      className: \"policyButton\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }, \"Decrypt\"), __jsx(\"img\", {\n      src: \"../static/verification.png\",\n      height: \"28\",\n      width: \"28\",\n      align: \"middle\",\n      alt: \"\",\n      className: \"jsx-3402671600\" + \" \" + \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 74\n      }\n    }))), __jsx(Button, {\n      marginLeft: -17,\n      marginBottom: 8,\n      appearance: \"minimal\",\n      iconBefore: \"message\",\n      onClick: () => setState({\n        isShown: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 7\n      }\n    }, __jsx(Menu.Item, {\n      role: \"menuitem\",\n      icon: \"lock\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 7\n      }\n    }, __jsx(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 46\n      }\n    }, \"Upload\"))))), __jsx(_JSXStyle, {\n      id: \"3402671600\",\n      __self: this\n    }, \".html.jsx-3402671600{background-color:#6200EE;}.body.jsx-3402671600{background-color:#6200EE;}.column.jsx-3402671600{text-align:center;border-width:1px;list-style:none;padding-bottom:8px;padding-top:8px;margin-right:28px;}.center.jsx-3402671600{margin-left:3px;margin-bottom:10px;}h4.jsx-3402671600{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;margin:10px 0;font-size:16px;font-weight:normal;padding-left:5px;color:rgb(102,102,102);}p.jsx-3402671600{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;margin:10px 0;font-size:14px;font-weight:normal;padding-left:5px;color:rgb(102,102,102);}.to.jsx-3402671600{width:260px;padding-bottom:8px;padding-top:8px;border:1px solid #d0d4d9;border-radius:.375rem;-webkit-box-shadow:inset 0 -1px 0 0 rgba(100,121,143,0.122);box-shadow:inset 0 -1px 0 0 rgba(100,121,143,0.122);line-height:20px;min-height:auto;padding-left:0;padding-right:0;}.policyButton.jsx-3402671600{-webkit-appearance:none;position:relative;display:inline-block;vertical-align:middle;text-transform:uppercase;text-align:center;line-height:0;white-space:nowrap;width:120px;height:30px;margin-left:8px;font-weight:500;font-size:12px;color:rgb(102,102,102);background-color:rgb(255,255,255);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;padding:0px 10px;margin-bottom:2px;border-radius:5px;border-width:1px;border-style:solid;border-color:rgb(234,234,234);border-image:initial;-webkit-transition:all 0.2s ease 0s;transition:all 0.2s ease 0s;overflow:hidden;outline:none;}.policyDropdown.jsx-3402671600{display:inline-block;vertical-align:middle;text-transform:uppercase;text-align:center;line-height:0;white-space:nowrap;width:120px;height:30px;margin-left:8px;font-weight:500;font-size:12px;color:rgb(102,102,102);background-color:rgb(255,255,255);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;padding:0px 10px;margin-bottom:2px;border-radius:5px;border-width:1px;border-style:solid;border-color:rgb(234,234,234);border-image:initial;-webkit-transition:all 0.2s ease 0s;transition:all 0.2s ease 0s;overflow:hidden;outline:none;}.ipfsInput.jsx-3402671600{-webkit-appearance:none;position:relative;display:inline-block;vertical-align:middle;text-transform:uppercase;text-align:center;line-height:0;white-space:nowrap;width:300px;height:30px;margin-left:8px;font-weight:500;font-size:12px;color:#000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;padding:0px 10px;margin-bottom:2px;border-radius:5px;border-width:1px;border-style:solid;border-color:rgb(234,234,234);border-image:initial;-webkit-transition:all 0.2s ease 0s;transition:all 0.2s ease 0s;overflow:hidden;outline:none;}.message-box.jsx-3402671600{padding-bottom:28px;width:300px;overflow:auto;margin:0;min-height:42px;height:38px;max-height:180px;border:1px solid rgba(134,134,134,.7);border-color:rgb(234,234,234);border-radius:.375rem;outline:0;background:#fff;resize:none;box-shadow:none;color:#1d1c1d;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;padding:9px 30px 10px 50px;\\\"}.login {  color: #FFF;}.tripleCheck {  color: #FFF;  text-color: #FFF;}.account {  font-size: 13px;  line-height: 1.91667;  font-weight: 400;  color: #3d464d;  border: 1px solid #bdc4c9;  padding: 3.5px 7px;  border-radius: 4px;  margin-top: 28px;  margin-left: 8px;}.row {  flex-direction: column;  margin: -1.5rem 0;  text-align: center;}// CSS only media query for tablet@media screen and (max-width: 960px) {  .row {    flex-direction: column;    margin: -1.5rem 0;  }  .column {    width: 8%;    padding: 1.5rem 0;    text-align: center;    max-width: 100px;  }  .message-box {    padding-bottom: 28px;    width: 100px;    overflow: auto;    margin: 0;     min-height: 42px;     height: 38px;     max-height: 180px;     border: 2px solid rgba(134,134,134,.7);    border-radius: .375rem;    outline: 0;    background: #FFFFFF;    resize: none;    box-shadow: none;    color: #1d1c1d;    -webkit-user-select: auto;    -moz-user-select: auto;    -ms-user-select: auto;    user-select: auto;    padding: 9px 30px 10px 50px;    display: none;  }  };}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxjb3ZpZDE5XFxjbGllbnRcXHNyY1xcY29tcG9uZW50c1xcbWVzc2FnZXNcXFRyaXBsZUNoYXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa01vQixBQU00QixBQUlGLEFBTUwsQUFTRixBQUtvSCxBQVNBLEFBU3hILEFBY1ksQUErQkgsQUE4QkcsQUErQkosWUF6R0QsSUF2QkEsRUFURixFQTBJSixDQTdEUyxHQS9CSixBQTZEQSxDQXJIcEIsQUFLQSxNQXNDa0IsQ0EwR0YsR0ExSUUsQUFTbEIsT0FxQ3VCLEFBNkRBLENBOUJJLEdBOERoQixDQTFHZ0IsSUFoQ04sSUEySUgsUUE3Rk0sQUE2REEsS0E5QkosRUE1RUYsQ0EySUosQ0EzR1UsV0E0R0wsRUE5RlEsQUE2REEsQ0ExR1AsQUE0RUosUUE1QzhDLE1BNkN6QyxBQStEbUIsSUEzSXhDLE1BNkNvQixBQTZEQSxTQTdCTixTQS9CRSxBQTZEQSxHQTdCRixDQXJFRSxBQVNBLE1BMEhrQixJQTdGYixBQTZEQSxDQTdCSCxHQXJFRCxBQVNBLFFBYXFDLEtBZ0RwQyxFQXJFRyxBQVNBLEFBNEJQLEFBNkRBLE9BZ0NVLEtBNUZWLEFBNkRBLEVBN0JHLEtBckVFLEFBU0EsS0E2QkQsQUE2REEsS0E3QlMsQUE0RGYsT0FqSWUsQUFTQSxHQXlIVCxDQTVGQSxBQTZEQSxLQS9FQyxPQWtEbUIsR0E2RHhCLENBNUZHLEFBNkRBLEdBbkdqQixBQVNBLEdBV2tCLEtBK0dBLElBNUZTLEFBNkRkLE9BL0VJLElBZ0ZFLENBK0JILEdBOURHLE9BaERELENBa0JvQixHQTZGWCxZQTlHM0IsYUErR3dCLE1BN0ZMLGdCQThGSSxxQkFDSixFQWxDRixJQS9CQSxXQWdDTSxJQS9CQSwyQkE5Qk4sZUFDTSxJQTZESixJQS9CQSxhQWdDQyxDQWdDUyxHQS9EVCxjQWdDQSxJQS9CQSxNQWtJcEIsQ0FqS21CLE9BK0RBLElBL0JBLE1BL0JDLE9BK0RDLElBL0JBLE9BL0JELFFBK0RjLElBL0JBLE1BL0JmLGlCQUNFLEdBOERFLElBL0JBLFlBOUJXLEtBOERKLElBL0JBLHFCQTlCUCxxQkFDTyxrQkE2RFosSUEvQkEsWUFnQ0gsSUEvQkEsU0FpQ2YsSUFoQ0EsYUEvQmtCLGdCQUNILGFBQ2YsaXpCQXVKQyIsImZpbGUiOiJDOlxcY292aWQxOVxcY2xpZW50XFxzcmNcXGNvbXBvbmVudHNcXG1lc3NhZ2VzXFxUcmlwbGVDaGF0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB1c2VGZXRjaCBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy91c2VGZXRjaFwiO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgcXVlcnlzdHJpbmcgZnJvbSAncXVlcnlzdHJpbmcnO1xyXG5pbXBvcnQgQnV0dG9uIGZyb20gJ2V2ZXJncmVlbi11aS9jb21tb25qcy9idXR0b25zL3NyYy9CdXR0b24nO1xyXG5pbXBvcnQgVHlwaW5nSW5kaWNhdG9yIGZyb20gJy4vVHlwaW5nSW5kaWNhdG9yJztcclxuaW1wb3J0IHsgZGlzdGFuY2VJbldvcmRzVG9Ob3csIGlzVG9kYXkgfSBmcm9tICdkYXRlLWZucyc7XHJcbmltcG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBVc2VyQ29udGV4dCBmcm9tICcuLi8uLi9jb21wb25lbnRzL1VzZXJDb250ZXh0JztcclxuaW1wb3J0IFRleHRJbnB1dCBmcm9tICdldmVyZ3JlZW4tdWkvY29tbW9uanMvdGV4dC1pbnB1dC9zcmMvVGV4dElucHV0JztcclxuaW1wb3J0IENvbnRhaW5lciBmcm9tICcuLi8uLi9jb21wb25lbnRzL2NvbnRhaW5lcidcclxuaW1wb3J0IENvbXBvbmVudCBmcm9tICdAcmVhY2gvY29tcG9uZW50LWNvbXBvbmVudCc7XHJcbmltcG9ydCBDb3JuZXJEaWFsb2cgZnJvbSAnZXZlcmdyZWVuLXVpL2NvbW1vbmpzL2Nvcm5lci1kaWFsb2cvc3JjL0Nvcm5lckRpYWxvZydcclxuaW1wb3J0IE1lbnUgZnJvbSAnZXZlcmdyZWVuLXVpL2NvbW1vbmpzL21lbnUvc3JjL01lbnUnO1xyXG5pbXBvcnQgVGV4dCBmcm9tICdldmVyZ3JlZW4tdWkvY29tbW9uanMvdHlwb2dyYXBoeS9zcmMvVGV4dCc7XHJcbmltcG9ydCBIZWFkaW5nIGZyb20gJ2V2ZXJncmVlbi11aS9jb21tb25qcy90eXBvZ3JhcGh5L3NyYy9IZWFkaW5nJztcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcmlwbGVDaGF0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuXHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gVXNlckNvbnRleHQ7XHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKClcclxuICAgIFxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgIHN0YXR1czogJycsXHJcbiAgICBoYXNoOiAnJyxcclxuICAgIHBhc3M6ICcnLFxyXG4gICAgZmlsZTogbnVsbCxcclxuICAgIHBvbGljeTonJyxcclxuICAgIG1lc3NhZ2U6ICcnLFxyXG4gICAgZGVjcnlwdGVkRGF0YTogW11cclxuICAgIH1cclxuICAgIHRoaXMub25Gb3JtU3VibWl0ID0gdGhpcy5vbkZvcm1TdWJtaXQuYmluZCh0aGlzKVxyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKVxyXG4gICAgdGhpcy5oYW5kbGVQb2xpY3lDaGFuZ2UgPSB0aGlzLmhhbmRsZVBvbGljeUNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgICB0aGlzLmZpbGVVcGxvYWQgPSB0aGlzLmZpbGVVcGxvYWQuYmluZCh0aGlzKVxyXG4gIH1cclxuICBcclxuXHJcbiAgaGFuZGxlSGFzaENoYW5nZSA9IGV2ZW50ID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBoYXNoOiBldmVudC50YXJnZXQudmFsdWUgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVQYXNzd29yZENoYW5nZSA9IGV2ZW50ID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBwYXNzOiBldmVudC50YXJnZXQudmFsdWUgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVUeXBpbmcgPSAoYm9keSwgbXV0YXRlKSA9PiB7XHJcbiAgICBjb25zdCB0ZXh0TGVuZ3RoID0gYm9keS5sZW5ndGg7XHJcbiAgICBpZiAoKHRleHRMZW5ndGggIT09IDAgJiYgdGV4dExlbmd0aCAlIDUgPT09IDApIHx8IHRleHRMZW5ndGggPT09IDEpIHtcclxuICAgICAgdGhpcy5lbWl0VHlwaW5nRXZlbnQobXV0YXRlKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoeyBib2R5IH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlUmVzcG9uc2UgPSAoc3RhdHVzLCBtc2cpID0+IHtcclxuICAgIGlmIChzdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICBzZXRTdGF0dXMoe1xyXG4gICAgICAgIHN1Ym1pdHRlZDogdHJ1ZSxcclxuICAgICAgICBzdWJtaXR0aW5nOiBmYWxzZSxcclxuICAgICAgICBpbmZvOiB7IGVycm9yOiBmYWxzZSwgbXNnOiBtc2cgfVxyXG4gICAgICB9KVxyXG4gICAgICBzZXRJbnB1dHMoe1xyXG4gICAgICAgIGVtYWlsOiAnJyxcclxuICAgICAgICBtZXNzYWdlOiAnJ1xyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0U3RhdHVzKHtcclxuICAgICAgICBpbmZvOiB7IGVycm9yOiB0cnVlLCBtc2c6IG1zZyB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBGb3JtIFN1Ym1pdFxyXG5cclxuICBvbkZvcm1TdWJtaXQoZSl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCkgLy8gU3RvcCBmb3JtIHN1Ym1pdFxyXG4gICAgdGhpcy5maWxlVXBsb2FkKHRoaXMuc3RhdGUuZmlsZSkudGhlbigocmVzcG9uc2UpPT57XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBtZXNzYWdlOiAnU3VjY2Vzcy4nfSlcclxuICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XHJcbiAgICB9KVxyXG4gIH1cclxuICBvbkNoYW5nZShlKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtmaWxlOmUudGFyZ2V0LmZpbGVzWzBdfSlcclxuICB9XHJcblxyXG5cclxuICBoYW5kbGVQb2xpY3lDaGFuZ2UoZSkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHBvbGljeTogZS50YXJnZXQudmFsdWUgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBFbWl0IFR5cGluZ1xyXG5cclxuXHJcbiAgZW1pdFR5cGluZ0V2ZW50ID0gYXN5bmMgKG11dGF0ZSkgPT4ge1xyXG4gICAgaWYgKHRoaXMuY29udGV4dC51c2VyKSB7XHJcbiAgICAgIGF3YWl0IG11dGF0ZSh7XHJcbiAgICAgICAgbXV0YXRpb246IGVtaXRUeXBpbmdFdmVudCxcclxuICAgICAgICB2YXJpYWJsZXM6IHtcclxuICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLmNvbnRleHQudXNlclxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRGaWxlcygpIHtcclxuICAgIGNvbnN0IGl0ZW1zID0gdXNlRmV0Y2goXCJodHRwczovL2FwcC50cmlwbGVjaGVjay5uZXR3b3JrL2xpc3RFbmNyeXB0ZWRGaWxlc1wiKTtcclxuICB9XHJcblxyXG4gIC8vIEZpbGUgVXBsb2FkXHJcblxyXG4gIGZpbGVVcGxvYWQoZmlsZSl7XHJcblxyXG4gICAgY29uc3QgcG9saWN5ID0gdGhpcy5zdGF0ZS5wb2xpY3k7XHJcblxyXG4gICAgY29uc3QgdXJsID0gXCJodHRwczovL2FwcC50cmlwbGVjaGVjay5uZXR3b3JrL3VwbG9hZFwiO1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgncG9saWN5JywgcG9saWN5KVxyXG4gICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJyxmaWxlKVxyXG4gICAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJyxcclxuICAgICAgICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIjogXCIqXCIsXHJcbiAgICAgICAgICAgIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiOiBcIlBPU1QsR0VULE9QVElPTlMsIFBVVCwgREVMRVRFXCJcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gIHBvc3QodXJsLCBmb3JtRGF0YSwgY29uZmlnKVxyXG4gIH1cclxuXHJcbiAgLy8gSGFuZGxlIFN1Ym1pdFxyXG5cclxuICBoYW5kbGVTdWJtaXQgPSBldmVudCA9PiB7XHJcblxyXG4gICAgY29uc3QgaGFzaCA9IHRoaXMuc3RhdGUuaGFzaDtcclxuXHJcbiAgICBjb25zdCBwYXNzID0gdGhpcy5zdGF0ZS5wYXNzO1xyXG5cclxuICAgIGxldCBheGlvc0NvbmZpZyA9IHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIjogXCIqXCIsXHJcbiAgICAgICAgICBcIkFjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHNcIjogXCJQT1NULEdFVCxPUFRJT05TLCBQVVQsIERFTEVURVwiXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYXhpb3MucG9zdChgaHR0cHM6Ly9hcHAudHJpcGxlY2hlY2submV0d29yay9kZWNyeXB0YCwgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHsgaGFzaDogaGFzaCwgcGFzczogcGFzc30pLCAgYXhpb3NDb25maWcpXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG5cclxuICAgICAgY29uc3QgZGVjcnlwdGVkRGF0YSA9IHJlcy5kYXRhO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgZGVjcnlwdGVkRGF0YSB9KTtcclxuICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpO1xyXG4gICAgfSlcclxufVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8bWFpbj5cclxuICAgICAgICA8Q29tcG9uZW50IGluaXRpYWxTdGF0ZT17eyBpc1Nob3duOiBmYWxzZSB9fT5cclxuICAgICAgICAgICAgeyh7IHN0YXRlLCBzZXRTdGF0ZSB9KSA9PiAoXHJcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgIDxDb3JuZXJEaWFsb2dcclxuICAgICAgICBpc1Nob3duPXtzdGF0ZS5pc1Nob3dufVxyXG4gICAgICAgIGNvbmZpcm1MYWJlbD1cIlN1Ym1pdFwiXHJcbiAgICAgICAgb25DYW5jZWw9eygpID0+IHNldFN0YXRlKHsgaXNTaG93bjogZmFsc2UgfSl9XHJcbiAgICAgICAgb25DbG9zZUNvbXBsZXRlPXt0aGlzLmhhbmRsZVN1Ym1pdH1cclxuICAgICAgICBoYXNGb290ZXI9e2ZhbHNlfVxyXG4gICAgICA+XHJcbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fT5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZX0gLz5cclxuICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT1cInBvbGljeURyb3Bkb3duXCIgdmFsdWU9e3RoaXMuc3RhdGUucG9saWN5fSBvbkNoYW5nZT17dGhpcy5oYW5kbGVQb2xpY3lDaGFuZ2V9PlxyXG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInBvbGljeTFcIj5Qb2xpY3kgMTwvb3B0aW9uPlxyXG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInBvbGljeTJcIj5Qb2xpY3kgMjwvb3B0aW9uPlxyXG4gICAgICA8L3NlbGVjdD5cclxuICAgICAgPEJ1dHRvbiB0eXBlPVwic3VibWl0XCIgbWFyZ2luQm90dG9tPXs4fSBtYXJnaW5MZWZ0PXs4fSBpY29uQmVmb3JlPVwiY2xvdWQtdXBsb2FkXCIgPlVwbG9hZDwvQnV0dG9uPjxoNCBjbGFzc05hbWU9XCJzdWNjZXNzTWVzc2FnZVwiPnsgdGhpcy5zdGF0ZS5tZXNzYWdlIH08L2g0PlxyXG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRyaXBsZUNoZWNrXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBwbGFjZWhvbGRlcj1cIk1lc3NhZ2UgSGFzaFwiIGNsYXNzTmFtZT1cIm1lc3NhZ2UtYm94XCIgdHlwZT1cInRleHRcIiBuYW1lPVwiaGFzaFwiIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUhhc2hDaGFuZ2V9IC8+XHJcbiAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgPGJyLz5cclxuICAgICAgICAgIDxici8+XHJcbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidHJpcGxlQ2hlY2tcIj5cclxuICAgICAgICAgICAgPGlucHV0IHBsYWNlaG9sZGVyPVwiUGFzc3dvcmRcIiBjbGFzc05hbWU9XCJtZXNzYWdlLWJveFwiIHR5cGU9XCJwYXNzd29yZFwiIG5hbWU9XCJwYXNzXCIgb25DaGFuZ2U9e3RoaXMuaGFuZGxlUGFzc3dvcmRDaGFuZ2V9IC8+XHJcbiAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgPGJyLz5cclxuICAgICAgICAgIDxici8+XHJcbiAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT1cInBvbGljeUJ1dHRvblwiIHR5cGU9XCJzdWJtaXRcIj5EZWNyeXB0PC9CdXR0b24+PGltZyBjbGFzc05hbWU9XCJjZW50ZXJcIiBzcmM9XCIuLi9zdGF0aWMvdmVyaWZpY2F0aW9uLnBuZ1wiIGhlaWdodD1cIjI4XCIgd2lkdGg9XCIyOFwiIGFsaWduPVwibWlkZGxlXCIgYWx0PVwiXCIvPlxyXG4gICAgICAgIDwvZm9ybT5cclxuICAgICAgPC9Db3JuZXJEaWFsb2c+XHJcbiAgICAgIDxCdXR0b24gbWFyZ2luTGVmdD17LTE3fSBtYXJnaW5Cb3R0b209ezh9IGFwcGVhcmFuY2U9XCJtaW5pbWFsXCIgaWNvbkJlZm9yZT1cIm1lc3NhZ2VcIiBvbkNsaWNrPXsoKSA9PiBzZXRTdGF0ZSh7IGlzU2hvd246IHRydWUgfSl9PlxyXG4gICAgICA8TWVudS5JdGVtIHJvbGU9XCJtZW51aXRlbVwiIGljb249XCJsb2NrXCI+PFRleHQ+VXBsb2FkPC9UZXh0PjwvTWVudS5JdGVtPlxyXG4gICAgICA8L0J1dHRvbj5cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgKX1cclxuPC9Db21wb25lbnQ+XHJcblxyXG4gICAgICAgIDxzdHlsZSBqc3g+e2BcclxuXHJcblxyXG5cclxuLmh0bWwge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM2MjAwRUU7XHJcbn1cclxuXHJcbi5ib2R5IHtcclxuYmFja2dyb3VuZC1jb2xvcjogIzYyMDBFRTtcclxuXHJcbn1cclxuXHJcblxyXG4uY29sdW1uIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgbGlzdC1zdHlsZTogbm9uZTtcclxuICBwYWRkaW5nLWJvdHRvbTogOHB4O1xyXG4gIHBhZGRpbmctdG9wOiA4cHg7XHJcbiAgbWFyZ2luLXJpZ2h0OiAyOHB4O1xyXG59XHJcblxyXG4uY2VudGVyIHtcclxuICBtYXJnaW4tbGVmdDogM3B4O1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuXHJcbmg0IHtcclxuICBmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSxCbGlua01hY1N5c3RlbUZvbnQsU2Vnb2UgVUksUm9ib3RvLE94eWdlbixVYnVudHUsQ2FudGFyZWxsLEZpcmEgU2FucyxEcm9pZCBTYW5zLEhlbHZldGljYSBOZXVlLHNhbnMtc2VyaWY7XHJcbiAgbWFyZ2luOiAxMHB4IDA7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XHJcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XHJcbiAgY29sb3I6IHJnYigxMDIsIDEwMiwgMTAyKTtcclxufVxyXG5cclxucCB7XHJcbiAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sQmxpbmtNYWNTeXN0ZW1Gb250LFNlZ29lIFVJLFJvYm90byxPeHlnZW4sVWJ1bnR1LENhbnRhcmVsbCxGaXJhIFNhbnMsRHJvaWQgU2FucyxIZWx2ZXRpY2EgTmV1ZSxzYW5zLXNlcmlmO1xyXG4gIG1hcmdpbjogMTBweCAwO1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBmb250LXdlaWdodDogbm9ybWFsO1xyXG4gIHBhZGRpbmctbGVmdDogNXB4O1xyXG4gIGNvbG9yOiByZ2IoMTAyLCAxMDIsIDEwMik7XHJcbn1cclxuXHJcbi50byB7XHJcbiAgd2lkdGg6IDI2MHB4O1xyXG4gIHBhZGRpbmctYm90dG9tOiA4cHg7XHJcbiAgcGFkZGluZy10b3A6IDhweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjZDBkNGQ5OyBcclxuICBib3JkZXItcmFkaXVzOiAuMzc1cmVtO1xyXG4gIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAtMXB4IDAgMCByZ2JhKDEwMCwxMjEsMTQzLDAuMTIyKTtcclxuICBib3gtc2hhZG93OiBpbnNldCAwIC0xcHggMCAwIHJnYmEoMTAwLDEyMSwxNDMsMC4xMjIpO1xyXG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xyXG4gIG1pbi1oZWlnaHQ6IGF1dG87IFxyXG4gIHBhZGRpbmctbGVmdDogMDsgXHJcbiAgcGFkZGluZy1yaWdodDogMDtcclxufVxyXG5cclxuLnBvbGljeUJ1dHRvbiB7XHJcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBsaW5lLWhlaWdodDogMDtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gIHdpZHRoOiAxMjBweDtcclxuICBoZWlnaHQ6IDMwcHg7XHJcbiAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICBjb2xvcjogcmdiKDEwMiwgMTAyLCAxMDIpO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gIHBhZGRpbmc6IDBweCAxMHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDJweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuICBib3JkZXItY29sb3I6IHJnYigyMzQsIDIzNCwgMjM0KTtcclxuICBib3JkZXItaW1hZ2U6IGluaXRpYWw7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZSAwcztcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbn1cclxuXHJcbi5wb2xpY3lEcm9wZG93biB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgbGluZS1oZWlnaHQ6IDA7XHJcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICB3aWR0aDogMTIwcHg7XHJcbiAgaGVpZ2h0OiAzMHB4O1xyXG4gIG1hcmdpbi1sZWZ0OiA4cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgY29sb3I6IHJnYigxMDIsIDEwMiwgMTAyKTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICBwYWRkaW5nOiAwcHggMTBweDtcclxuICBtYXJnaW4tYm90dG9tOiAycHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGJvcmRlci13aWR0aDogMXB4O1xyXG4gIGJvcmRlci1zdHlsZTogc29saWQ7XHJcbiAgYm9yZGVyLWNvbG9yOiByZ2IoMjM0LCAyMzQsIDIzNCk7XHJcbiAgYm9yZGVyLWltYWdlOiBpbml0aWFsO1xyXG4gIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UgMHM7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICBvdXRsaW5lOiBub25lO1xyXG59XHJcblxyXG5cclxuLmlwZnNJbnB1dCB7XHJcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBsaW5lLWhlaWdodDogMDtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gIHdpZHRoOiAzMDBweDtcclxuICBoZWlnaHQ6IDMwcHg7XHJcbiAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICBjb2xvcjogIzAwMDtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gIHBhZGRpbmc6IDBweCAxMHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDJweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuICBib3JkZXItY29sb3I6IHJnYigyMzQsIDIzNCwgMjM0KTtcclxuICBib3JkZXItaW1hZ2U6IGluaXRpYWw7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZSAwcztcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgXHJcbn1cclxuXHJcbi5tZXNzYWdlLWJveCB7XHJcbiAgcGFkZGluZy1ib3R0b206IDI4cHg7XHJcbiAgd2lkdGg6IDMwMHB4IDtcclxuICBvdmVyZmxvdzogYXV0bztcclxuICBtYXJnaW46IDA7IFxyXG4gIG1pbi1oZWlnaHQ6IDQycHg7IFxyXG4gIGhlaWdodDogMzhweDsgXHJcbiAgbWF4LWhlaWdodDogMTgwcHg7IFxyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMTM0LDEzNCwxMzQsLjcpO1xyXG4gIGJvcmRlci1jb2xvcjogcmdiKDIzNCwgMjM0LCAyMzQpO1xyXG4gIGJvcmRlci1yYWRpdXM6IC4zNzVyZW07XHJcbiAgb3V0bGluZTogMDtcclxuICBiYWNrZ3JvdW5kOiAjZmZmO1xyXG4gIHJlc2l6ZTogbm9uZTtcclxuICBib3gtc2hhZG93OiBub25lO1xyXG4gIGNvbG9yOiAjMWQxYzFkO1xyXG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IGF1dG87XHJcbiAgLW1vei11c2VyLXNlbGVjdDogYXV0bztcclxuICAtbXMtdXNlci1zZWxlY3Q6IGF1dG87XHJcbiAgdXNlci1zZWxlY3Q6IGF1dG87XHJcbiAgcGFkZGluZzogOXB4IDMwcHggMTBweCA1MHB4O1wiXHJcbn1cclxuXHJcbi5sb2dpbiB7XHJcbiAgY29sb3I6ICNGRkY7XHJcbn1cclxuXHJcbi50cmlwbGVDaGVjayB7XHJcbiAgY29sb3I6ICNGRkY7XHJcbiAgdGV4dC1jb2xvcjogI0ZGRjtcclxufVxyXG5cclxuLmFjY291bnQge1xyXG4gIGZvbnQtc2l6ZTogMTNweDtcclxuICBsaW5lLWhlaWdodDogMS45MTY2NztcclxuICBmb250LXdlaWdodDogNDAwO1xyXG4gIGNvbG9yOiAjM2Q0NjRkO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNiZGM0Yzk7XHJcbiAgcGFkZGluZzogMy41cHggN3B4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBtYXJnaW4tdG9wOiAyOHB4O1xyXG4gIG1hcmdpbi1sZWZ0OiA4cHg7XHJcbn1cclxuXHJcbi5yb3cge1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgbWFyZ2luOiAtMS41cmVtIDA7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4vLyBDU1Mgb25seSBtZWRpYSBxdWVyeSBmb3IgdGFibGV0XHJcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk2MHB4KSB7XHJcbiAgLnJvdyB7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgbWFyZ2luOiAtMS41cmVtIDA7XHJcbiAgfVxyXG4gIC5jb2x1bW4ge1xyXG4gICAgd2lkdGg6IDglO1xyXG4gICAgcGFkZGluZzogMS41cmVtIDA7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBtYXgtd2lkdGg6IDEwMHB4O1xyXG4gIH1cclxuXHJcbiAgLm1lc3NhZ2UtYm94IHtcclxuICAgIHBhZGRpbmctYm90dG9tOiAyOHB4O1xyXG4gICAgd2lkdGg6IDEwMHB4O1xyXG4gICAgb3ZlcmZsb3c6IGF1dG87XHJcbiAgICBtYXJnaW46IDA7IFxyXG4gICAgbWluLWhlaWdodDogNDJweDsgXHJcbiAgICBoZWlnaHQ6IDM4cHg7IFxyXG4gICAgbWF4LWhlaWdodDogMTgwcHg7IFxyXG4gICAgYm9yZGVyOiAycHggc29saWQgcmdiYSgxMzQsMTM0LDEzNCwuNyk7XHJcbiAgICBib3JkZXItcmFkaXVzOiAuMzc1cmVtO1xyXG4gICAgb3V0bGluZTogMDtcclxuICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7XHJcbiAgICByZXNpemU6IG5vbmU7XHJcbiAgICBib3gtc2hhZG93OiBub25lO1xyXG4gICAgY29sb3I6ICMxZDFjMWQ7XHJcbiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBhdXRvO1xyXG4gICAgLW1vei11c2VyLXNlbGVjdDogYXV0bztcclxuICAgIC1tcy11c2VyLXNlbGVjdDogYXV0bztcclxuICAgIHVzZXItc2VsZWN0OiBhdXRvO1xyXG4gICAgcGFkZGluZzogOXB4IDMwcHggMTBweCA1MHB4O1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxuICB9XHJcblxyXG4gIFxyXG59XHJcbmB9PC9zdHlsZT5cclxuICAgICAgPC9tYWluPlxyXG4gICAgKVxyXG4gIH1cclxufSJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\covid19\\\\\\\\client\\\\\\\\src\\\\\\\\components\\\\\\\\messages\\\\\\\\TripleChat.js */\"));\n  }\n\n}\n\n_defineProperty(TripleChat, \"contextType\", UserContext);","map":{"version":3,"sources":["C:/covid19/client/src/components/messages/TripleChat.js"],"names":["React","useEffect","useState","useFetch","axios","querystring","Button","TypingIndicator","distanceInWordsToNow","isToday","useContext","UserContext","TextInput","Container","Component","CornerDialog","Menu","Text","Heading","TripleChat","constructor","props","event","setState","hash","target","value","pass","body","mutate","textLength","length","emitTypingEvent","status","msg","setStatus","submitted","submitting","info","error","setInputs","email","message","context","user","mutation","variables","username","state","axiosConfig","headers","post","stringify","then","res","decryptedData","data","console","log","file","policy","onFormSubmit","bind","onChange","handlePolicyChange","fileUpload","e","preventDefault","response","files","getFiles","items","url","formData","FormData","append","config","render","isShown","handleSubmit","handleHashChange","handlePasswordChange"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,aAAxB;AACA,OAAOC,MAAP,MAAmB,0CAAnB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,oBAAT,EAA+BC,OAA/B,QAA8C,UAA9C;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,SAAP,MAAsB,gDAAtB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,YAAP,MAAyB,sDAAzB;AACA,OAAOC,IAAP,MAAiB,qCAAjB;AACA,OAAOC,IAAP,MAAiB,2CAAjB;AACA,OAAOC,OAAP,MAAoB,8CAApB;AAGA,eAAe,MAAMC,UAAN,SAAyBnB,KAAK,CAACc,SAA/B,CAAyC;AAGtDM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB;;AADiB,8CAmBAC,KAAK,IAAI;AAC1B,WAAKC,QAAL,CAAc;AAAEC,QAAAA,IAAI,EAAEF,KAAK,CAACG,MAAN,CAAaC;AAArB,OAAd;AACD,KArBkB;;AAAA,kDAuBIJ,KAAK,IAAI;AAC9B,WAAKC,QAAL,CAAc;AAAEI,QAAAA,IAAI,EAAEL,KAAK,CAACG,MAAN,CAAaC;AAArB,OAAd;AACD,KAzBkB;;AAAA,0CA2BJ,CAACE,IAAD,EAAOC,MAAP,KAAkB;AAC/B,YAAMC,UAAU,GAAGF,IAAI,CAACG,MAAxB;;AACA,UAAKD,UAAU,KAAK,CAAf,IAAoBA,UAAU,GAAG,CAAb,KAAmB,CAAxC,IAA8CA,UAAU,KAAK,CAAjE,EAAoE;AAClE,aAAKE,eAAL,CAAqBH,MAArB;AACD;;AACD,WAAKN,QAAL,CAAc;AAAEK,QAAAA;AAAF,OAAd;AACD,KAjCkB;;AAAA,4CAmCF,CAACK,MAAD,EAASC,GAAT,KAAiB;AAChC,UAAID,MAAM,KAAK,GAAf,EAAoB;AAClBE,QAAAA,SAAS,CAAC;AACRC,UAAAA,SAAS,EAAE,IADH;AAERC,UAAAA,UAAU,EAAE,KAFJ;AAGRC,UAAAA,IAAI,EAAE;AAAEC,YAAAA,KAAK,EAAE,KAAT;AAAgBL,YAAAA,GAAG,EAAEA;AAArB;AAHE,SAAD,CAAT;AAKAM,QAAAA,SAAS,CAAC;AACRC,UAAAA,KAAK,EAAE,EADC;AAERC,UAAAA,OAAO,EAAE;AAFD,SAAD,CAAT;AAID,OAVD,MAUO;AACLP,QAAAA,SAAS,CAAC;AACRG,UAAAA,IAAI,EAAE;AAAEC,YAAAA,KAAK,EAAE,IAAT;AAAeL,YAAAA,GAAG,EAAEA;AAApB;AADE,SAAD,CAAT;AAGD;AACF,KAnDkB;;AAAA,6CA0ED,MAAOL,MAAP,IAAkB;AAClC,UAAI,KAAKc,OAAL,CAAaC,IAAjB,EAAuB;AACrB,cAAMf,MAAM,CAAC;AACXgB,UAAAA,QAAQ,EAAEb,eADC;AAEXc,UAAAA,SAAS,EAAE;AACTC,YAAAA,QAAQ,EAAE,KAAKJ,OAAL,CAAaC;AADd;AAFA,SAAD,CAAZ;AAMD;AACF,KAnFkB;;AAAA,0CA+GJtB,KAAK,IAAI;AAEtB,YAAME,IAAI,GAAG,KAAKwB,KAAL,CAAWxB,IAAxB;AAEA,YAAMG,IAAI,GAAG,KAAKqB,KAAL,CAAWrB,IAAxB;AAEA,UAAIsB,WAAW,GAAG;AAChBC,QAAAA,OAAO,EAAE;AACL,yCAA+B,GAD1B;AAEL,0CAAgC;AAF3B;AADO,OAAlB;AAOA9C,MAAAA,KAAK,CAAC+C,IAAN,CAAY,yCAAZ,EAAsD9C,WAAW,CAAC+C,SAAZ,CAAsB;AAAE5B,QAAAA,IAAI,EAAEA,IAAR;AAAcG,QAAAA,IAAI,EAAEA;AAApB,OAAtB,CAAtD,EAAyGsB,WAAzG,EACCI,IADD,CACMC,GAAG,IAAI;AAEX,cAAMC,aAAa,GAAGD,GAAG,CAACE,IAA1B;AACA,aAAKjC,QAAL,CAAc;AAAEgC,UAAAA;AAAF,SAAd;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACE,IAAhB;AACD,OAND;AAOH,KAnIoB;;AAGjB,SAAKR,KAAL,GAAa;AACbf,MAAAA,MAAM,EAAE,EADK;AAEbT,MAAAA,IAAI,EAAE,EAFO;AAGbG,MAAAA,IAAI,EAAE,EAHO;AAIbgC,MAAAA,IAAI,EAAE,IAJO;AAKbC,MAAAA,MAAM,EAAC,EALM;AAMblB,MAAAA,OAAO,EAAE,EANI;AAOba,MAAAA,aAAa,EAAE;AAPF,KAAb;AASA,SAAKM,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKE,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBF,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKG,UAAL,GAAkB,KAAKA,UAAL,CAAgBH,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AAqCD;AAEAD,EAAAA,YAAY,CAACK,CAAD,EAAG;AACbA,IAAAA,CAAC,CAACC,cAAF,GADa,CACM;;AACnB,SAAKF,UAAL,CAAgB,KAAKjB,KAAL,CAAWW,IAA3B,EAAiCN,IAAjC,CAAuCe,QAAD,IAAY;AAChD,WAAK7C,QAAL,CAAc;AAAEmB,QAAAA,OAAO,EAAE;AAAX,OAAd;AACAe,MAAAA,OAAO,CAACC,GAAR,CAAYU,QAAQ,CAACZ,IAArB;AACD,KAHD;AAID;;AACDO,EAAAA,QAAQ,CAACG,CAAD,EAAI;AACV,SAAK3C,QAAL,CAAc;AAACoC,MAAAA,IAAI,EAACO,CAAC,CAACzC,MAAF,CAAS4C,KAAT,CAAe,CAAf;AAAN,KAAd;AACD;;AAGDL,EAAAA,kBAAkB,CAACE,CAAD,EAAI;AACpB,SAAK3C,QAAL,CAAc;AAAEqC,MAAAA,MAAM,EAAEM,CAAC,CAACzC,MAAF,CAASC;AAAnB,KAAd;AACD,GAxEqD,CA0EtD;;;AAcA4C,EAAAA,QAAQ,GAAG;AACT,UAAMC,KAAK,GAAGpE,QAAQ,CAAC,oDAAD,CAAtB;AACD,GA1FqD,CA4FtD;;;AAEA8D,EAAAA,UAAU,CAACN,IAAD,EAAM;AAEd,UAAMC,MAAM,GAAG,KAAKZ,KAAL,CAAWY,MAA1B;AAEA,UAAMY,GAAG,GAAG,wCAAZ;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0Bf,MAA1B;AACAa,IAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuBhB,IAAvB;AACA,UAAMiB,MAAM,GAAG;AACX1B,MAAAA,OAAO,EAAE;AACL,wBAAgB,qBADX;AAEL,uCAA+B,GAF1B;AAGL,wCAAgC;AAH3B;AADE,KAAf;AAOA,WAAQC,IAAI,CAACqB,GAAD,EAAMC,QAAN,EAAgBG,MAAhB,CAAZ;AACD,GA9GqD,CAgHtD;;;AAwBAC,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,SAAD;AAAW,MAAA,YAAY,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,CAAC;AAAE9B,MAAAA,KAAF;AAASzB,MAAAA;AAAT,KAAD,KACT,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,YAAD;AACE,MAAA,OAAO,EAAEyB,KAAK,CAAC8B,OADjB;AAEE,MAAA,YAAY,EAAC,QAFf;AAGE,MAAA,QAAQ,EAAE,MAAMvD,QAAQ,CAAC;AAAEuD,QAAAA,OAAO,EAAE;AAAX,OAAD,CAH1B;AAIE,MAAA,eAAe,EAAE,KAAKC,YAJxB;AAKE,MAAA,SAAS,EAAE,KALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOE;AAAM,MAAA,QAAQ,EAAE,KAAKA,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,QAAQ,EAAE,KAAKhB,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAEA;AAAmC,MAAA,KAAK,EAAE,KAAKf,KAAL,CAAWY,MAArD;AAA6D,MAAA,QAAQ,EAAE,KAAKI,kBAA5E;AAAA,0CAAkB,gBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE;AAAQ,MAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,CAFA,EAMF,MAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,YAAY,EAAE,CAApC;AAAuC,MAAA,UAAU,EAAE,CAAnD;AAAsD,MAAA,UAAU,EAAC,cAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANE,EAM8F;AAAA,0CAAc,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiC,KAAKhB,KAAL,CAAWN,OAA5C,CAN9F,EAOE;AAAA,0CAAiB,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,WAAW,EAAC,cAAnB;AAA0D,MAAA,IAAI,EAAC,MAA/D;AAAsE,MAAA,IAAI,EAAC,MAA3E;AAAkF,MAAA,QAAQ,EAAE,KAAKsC,gBAAjG;AAAA,0CAA4C,aAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAPF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXF,EAYE;AAAA,0CAAiB,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,WAAW,EAAC,UAAnB;AAAsD,MAAA,IAAI,EAAC,UAA3D;AAAsE,MAAA,IAAI,EAAC,MAA3E;AAAkF,MAAA,QAAQ,EAAE,KAAKC,oBAAjG;AAAA,0CAAwC,aAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAZF,EAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,EAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBF,EAiBE,MAAC,MAAD;AAAQ,MAAA,SAAS,EAAC,cAAlB;AAAiC,MAAA,IAAI,EAAC,QAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAjBF,EAiBiE;AAAwB,MAAA,GAAG,EAAC,4BAA5B;AAAyD,MAAA,MAAM,EAAC,IAAhE;AAAqE,MAAA,KAAK,EAAC,IAA3E;AAAgF,MAAA,KAAK,EAAC,QAAtF;AAA+F,MAAA,GAAG,EAAC,EAAnG;AAAA,0CAAe,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAjBjE,CAPF,CADF,EA4BE,MAAC,MAAD;AAAQ,MAAA,UAAU,EAAE,CAAC,EAArB;AAAyB,MAAA,YAAY,EAAE,CAAvC;AAA0C,MAAA,UAAU,EAAC,SAArD;AAA+D,MAAA,UAAU,EAAC,SAA1E;AAAoF,MAAA,OAAO,EAAE,MAAM1D,QAAQ,CAAC;AAAEuD,QAAAA,OAAO,EAAE;AAAX,OAAD,CAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,MAAC,IAAD,CAAM,IAAN;AAAW,MAAA,IAAI,EAAC,UAAhB;AAA2B,MAAA,IAAI,EAAC,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuC,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAvC,CADA,CA5BF,CAFI,CADF;AAAA;AAAA;AAAA,g5qBADF;AA0RD;;AAnaqD;;gBAAnC3D,U,iBAEER,W","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport useFetch from \"../../components/useFetch\";\r\nimport axios from 'axios';\r\nimport querystring from 'querystring';\r\nimport Button from 'evergreen-ui/commonjs/buttons/src/Button';\r\nimport TypingIndicator from './TypingIndicator';\r\nimport { distanceInWordsToNow, isToday } from 'date-fns';\r\nimport { useContext } from 'react';\r\nimport UserContext from '../../components/UserContext';\r\nimport TextInput from 'evergreen-ui/commonjs/text-input/src/TextInput';\r\nimport Container from '../../components/container'\r\nimport Component from '@reach/component-component';\r\nimport CornerDialog from 'evergreen-ui/commonjs/corner-dialog/src/CornerDialog'\r\nimport Menu from 'evergreen-ui/commonjs/menu/src/Menu';\r\nimport Text from 'evergreen-ui/commonjs/typography/src/Text';\r\nimport Heading from 'evergreen-ui/commonjs/typography/src/Heading';\r\n\r\n\r\nexport default class TripleChat extends React.Component {\r\n\r\n  static contextType = UserContext;\r\n  constructor(props) {\r\n    super()\r\n    \r\n    this.state = {\r\n    status: '',\r\n    hash: '',\r\n    pass: '',\r\n    file: null,\r\n    policy:'',\r\n    message: '',\r\n    decryptedData: []\r\n    }\r\n    this.onFormSubmit = this.onFormSubmit.bind(this)\r\n    this.onChange = this.onChange.bind(this)\r\n    this.handlePolicyChange = this.handlePolicyChange.bind(this)\r\n    this.fileUpload = this.fileUpload.bind(this)\r\n  }\r\n  \r\n\r\n  handleHashChange = event => {\r\n    this.setState({ hash: event.target.value });\r\n  }\r\n\r\n  handlePasswordChange = event => {\r\n    this.setState({ pass: event.target.value });\r\n  }\r\n\r\n  handleTyping = (body, mutate) => {\r\n    const textLength = body.length;\r\n    if ((textLength !== 0 && textLength % 5 === 0) || textLength === 1) {\r\n      this.emitTypingEvent(mutate);\r\n    }\r\n    this.setState({ body });\r\n  }\r\n\r\n  handleResponse = (status, msg) => {\r\n    if (status === 200) {\r\n      setStatus({\r\n        submitted: true,\r\n        submitting: false,\r\n        info: { error: false, msg: msg }\r\n      })\r\n      setInputs({\r\n        email: '',\r\n        message: ''\r\n      })\r\n    } else {\r\n      setStatus({\r\n        info: { error: true, msg: msg }\r\n      })\r\n    }\r\n  }\r\n\r\n  // Form Submit\r\n\r\n  onFormSubmit(e){\r\n    e.preventDefault() // Stop form submit\r\n    this.fileUpload(this.state.file).then((response)=>{\r\n      this.setState({ message: 'Success.'})\r\n      console.log(response.data);\r\n    })\r\n  }\r\n  onChange(e) {\r\n    this.setState({file:e.target.files[0]})\r\n  }\r\n\r\n\r\n  handlePolicyChange(e) {\r\n    this.setState({ policy: e.target.value });\r\n  }\r\n\r\n  // Emit Typing\r\n\r\n\r\n  emitTypingEvent = async (mutate) => {\r\n    if (this.context.user) {\r\n      await mutate({\r\n        mutation: emitTypingEvent,\r\n        variables: {\r\n          username: this.context.user\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  getFiles() {\r\n    const items = useFetch(\"https://app.triplecheck.network/listEncryptedFiles\");\r\n  }\r\n\r\n  // File Upload\r\n\r\n  fileUpload(file){\r\n\r\n    const policy = this.state.policy;\r\n\r\n    const url = \"https://app.triplecheck.network/upload\";\r\n    const formData = new FormData();\r\n    formData.append('policy', policy)\r\n    formData.append('file',file)\r\n    const config = {\r\n        headers: {\r\n            'content-type': 'multipart/form-data',\r\n            \"Access-Control-Allow-Origin\": \"*\",\r\n            \"Access-Control-Allow-Methods\": \"POST,GET,OPTIONS, PUT, DELETE\"\r\n        }\r\n    }\r\n    return  post(url, formData, config)\r\n  }\r\n\r\n  // Handle Submit\r\n\r\n  handleSubmit = event => {\r\n\r\n    const hash = this.state.hash;\r\n\r\n    const pass = this.state.pass;\r\n\r\n    let axiosConfig = {\r\n      headers: {\r\n          \"Access-Control-Allow-Origin\": \"*\",\r\n          \"Access-Control-Allow-Methods\": \"POST,GET,OPTIONS, PUT, DELETE\"\r\n      }\r\n    };\r\n\r\n    axios.post(`https://app.triplecheck.network/decrypt`, querystring.stringify({ hash: hash, pass: pass}),  axiosConfig)\r\n    .then(res => {\r\n\r\n      const decryptedData = res.data;\r\n      this.setState({ decryptedData });\r\n      console.log(res.data);\r\n    })\r\n}\r\n\r\n  render() {\r\n    return (\r\n      <main>\r\n        <Component initialState={{ isShown: false }}>\r\n            {({ state, setState }) => (\r\n    <React.Fragment>\r\n      <CornerDialog\r\n        isShown={state.isShown}\r\n        confirmLabel=\"Submit\"\r\n        onCancel={() => setState({ isShown: false })}\r\n        onCloseComplete={this.handleSubmit}\r\n        hasFooter={false}\r\n      >\r\n        <form onSubmit={this.handleSubmit}>\r\n        <input type=\"file\" onChange={this.onChange} />\r\n        <select className=\"policyDropdown\" value={this.state.policy} onChange={this.handlePolicyChange}>\r\n          <option value=\"policy1\">Policy 1</option>\r\n          <option value=\"policy2\">Policy 2</option>\r\n      </select>\r\n      <Button type=\"submit\" marginBottom={8} marginLeft={8} iconBefore=\"cloud-upload\" >Upload</Button><h4 className=\"successMessage\">{ this.state.message }</h4>\r\n          <label className=\"tripleCheck\">\r\n            <input placeholder=\"Message Hash\" className=\"message-box\" type=\"text\" name=\"hash\" onChange={this.handleHashChange} />\r\n          </label>\r\n          <br/>\r\n          <br/>\r\n          <label className=\"tripleCheck\">\r\n            <input placeholder=\"Password\" className=\"message-box\" type=\"password\" name=\"pass\" onChange={this.handlePasswordChange} />\r\n          </label>\r\n          <br/>\r\n          <br/>\r\n          <Button className=\"policyButton\" type=\"submit\">Decrypt</Button><img className=\"center\" src=\"../static/verification.png\" height=\"28\" width=\"28\" align=\"middle\" alt=\"\"/>\r\n        </form>\r\n      </CornerDialog>\r\n      <Button marginLeft={-17} marginBottom={8} appearance=\"minimal\" iconBefore=\"message\" onClick={() => setState({ isShown: true })}>\r\n      <Menu.Item role=\"menuitem\" icon=\"lock\"><Text>Upload</Text></Menu.Item>\r\n      </Button>\r\n    </React.Fragment>\r\n  )}\r\n</Component>\r\n\r\n        <style jsx>{`\r\n\r\n\r\n\r\n.html {\r\n  background-color: #6200EE;\r\n}\r\n\r\n.body {\r\nbackground-color: #6200EE;\r\n\r\n}\r\n\r\n\r\n.column {\r\n  text-align: center;\r\n  border-width: 1px;\r\n  list-style: none;\r\n  padding-bottom: 8px;\r\n  padding-top: 8px;\r\n  margin-right: 28px;\r\n}\r\n\r\n.center {\r\n  margin-left: 3px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\nh4 {\r\n  font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;\r\n  margin: 10px 0;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  padding-left: 5px;\r\n  color: rgb(102, 102, 102);\r\n}\r\n\r\np {\r\n  font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;\r\n  margin: 10px 0;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n  padding-left: 5px;\r\n  color: rgb(102, 102, 102);\r\n}\r\n\r\n.to {\r\n  width: 260px;\r\n  padding-bottom: 8px;\r\n  padding-top: 8px;\r\n  border: 1px solid #d0d4d9; \r\n  border-radius: .375rem;\r\n  -webkit-box-shadow: inset 0 -1px 0 0 rgba(100,121,143,0.122);\r\n  box-shadow: inset 0 -1px 0 0 rgba(100,121,143,0.122);\r\n  line-height: 20px;\r\n  min-height: auto; \r\n  padding-left: 0; \r\n  padding-right: 0;\r\n}\r\n\r\n.policyButton {\r\n  -webkit-appearance: none;\r\n  position: relative;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  text-transform: uppercase;\r\n  text-align: center;\r\n  line-height: 0;\r\n  white-space: nowrap;\r\n  width: 120px;\r\n  height: 30px;\r\n  margin-left: 8px;\r\n  font-weight: 500;\r\n  font-size: 12px;\r\n  color: rgb(102, 102, 102);\r\n  background-color: rgb(255, 255, 255);\r\n  user-select: none;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  padding: 0px 10px;\r\n  margin-bottom: 2px;\r\n  border-radius: 5px;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: rgb(234, 234, 234);\r\n  border-image: initial;\r\n  transition: all 0.2s ease 0s;\r\n  overflow: hidden;\r\n  outline: none;\r\n}\r\n\r\n.policyDropdown {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  text-transform: uppercase;\r\n  text-align: center;\r\n  line-height: 0;\r\n  white-space: nowrap;\r\n  width: 120px;\r\n  height: 30px;\r\n  margin-left: 8px;\r\n  font-weight: 500;\r\n  font-size: 12px;\r\n  color: rgb(102, 102, 102);\r\n  background-color: rgb(255, 255, 255);\r\n  user-select: none;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  padding: 0px 10px;\r\n  margin-bottom: 2px;\r\n  border-radius: 5px;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: rgb(234, 234, 234);\r\n  border-image: initial;\r\n  transition: all 0.2s ease 0s;\r\n  overflow: hidden;\r\n  outline: none;\r\n}\r\n\r\n\r\n.ipfsInput {\r\n  -webkit-appearance: none;\r\n  position: relative;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  text-transform: uppercase;\r\n  text-align: center;\r\n  line-height: 0;\r\n  white-space: nowrap;\r\n  width: 300px;\r\n  height: 30px;\r\n  margin-left: 8px;\r\n  font-weight: 500;\r\n  font-size: 12px;\r\n  color: #000;\r\n  user-select: none;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  padding: 0px 10px;\r\n  margin-bottom: 2px;\r\n  border-radius: 5px;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: rgb(234, 234, 234);\r\n  border-image: initial;\r\n  transition: all 0.2s ease 0s;\r\n  overflow: hidden;\r\n  outline: none;\r\n  \r\n}\r\n\r\n.message-box {\r\n  padding-bottom: 28px;\r\n  width: 300px ;\r\n  overflow: auto;\r\n  margin: 0; \r\n  min-height: 42px; \r\n  height: 38px; \r\n  max-height: 180px; \r\n  border: 1px solid rgba(134,134,134,.7);\r\n  border-color: rgb(234, 234, 234);\r\n  border-radius: .375rem;\r\n  outline: 0;\r\n  background: #fff;\r\n  resize: none;\r\n  box-shadow: none;\r\n  color: #1d1c1d;\r\n  -webkit-user-select: auto;\r\n  -moz-user-select: auto;\r\n  -ms-user-select: auto;\r\n  user-select: auto;\r\n  padding: 9px 30px 10px 50px;\"\r\n}\r\n\r\n.login {\r\n  color: #FFF;\r\n}\r\n\r\n.tripleCheck {\r\n  color: #FFF;\r\n  text-color: #FFF;\r\n}\r\n\r\n.account {\r\n  font-size: 13px;\r\n  line-height: 1.91667;\r\n  font-weight: 400;\r\n  color: #3d464d;\r\n  border: 1px solid #bdc4c9;\r\n  padding: 3.5px 7px;\r\n  border-radius: 4px;\r\n  margin-top: 28px;\r\n  margin-left: 8px;\r\n}\r\n\r\n.row {\r\n  flex-direction: column;\r\n  margin: -1.5rem 0;\r\n  text-align: center;\r\n}\r\n\r\n// CSS only media query for tablet\r\n@media screen and (max-width: 960px) {\r\n  .row {\r\n    flex-direction: column;\r\n    margin: -1.5rem 0;\r\n  }\r\n  .column {\r\n    width: 8%;\r\n    padding: 1.5rem 0;\r\n    text-align: center;\r\n    max-width: 100px;\r\n  }\r\n\r\n  .message-box {\r\n    padding-bottom: 28px;\r\n    width: 100px;\r\n    overflow: auto;\r\n    margin: 0; \r\n    min-height: 42px; \r\n    height: 38px; \r\n    max-height: 180px; \r\n    border: 2px solid rgba(134,134,134,.7);\r\n    border-radius: .375rem;\r\n    outline: 0;\r\n    background: #FFFFFF;\r\n    resize: none;\r\n    box-shadow: none;\r\n    color: #1d1c1d;\r\n    -webkit-user-select: auto;\r\n    -moz-user-select: auto;\r\n    -ms-user-select: auto;\r\n    user-select: auto;\r\n    padding: 9px 30px 10px 50px;\r\n    display: none;\r\n  }\r\n\r\n  \r\n}\r\n`}</style>\r\n      </main>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}